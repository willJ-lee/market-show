{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-2258ba98\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"order\"\n};\nconst _hoisted_2 = {\n  class: \"order__price\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\"实付金额 \");\n\nconst _hoisted_4 = {\n  class: \"order__price__money\"\n};\nconst _hoisted_5 = {\n  class: \"mask__content\"\n};\n\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"mask__content__title\"\n}, \"确认要离开收银台?\", -1\n/* HOISTED */\n));\n\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"mask__content__desc\"\n}, \"请尽快完成支付，否则将被取消\", -1\n/* HOISTED */\n));\n\nconst _hoisted_8 = {\n  class: \"mask__content__btns\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _createElementVNode(\"span\", _hoisted_4, \"¥\" + _toDisplayString($setup.calculations.price), 1\n  /* TEXT */\n  )]), _createElementVNode(\"div\", {\n    class: \"order__btn\",\n    onClick: _cache[0] || (_cache[0] = () => $setup.handleShowConfirm(true))\n  }, \"提交订单\")]), $setup.showConfirm ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    class: \"mask\",\n    onClick: _cache[3] || (_cache[3] = () => $setup.handleShowConfirm(false))\n  }, [_createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _hoisted_7, _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", {\n    class: \"mask__content__btn mask__content__btn--left\",\n    onClick: _cache[1] || (_cache[1] = () => {\n      $setup.handleConfirmOrder(true);\n    })\n  }, \"取消订单\"), _createElementVNode(\"div\", {\n    class: \"mask__content__btn mask__content__btn--right\",\n    onClick: _cache[2] || (_cache[2] = () => {\n      $setup.handleConfirmOrder(false);\n    })\n  }, \"确认支付\")])])])) : _createCommentVNode(\"v-if\", true)], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":";;;;;AACOA,OAAK,EAAC;;;AACJA,OAAK,EAAC;;;iDAAe;;;AAClBA,OAAK,EAAC;;;AAKTA,OAAK,EAAC;;;gEACTC,oBAAiD,KAAjD,EAAiD;AAA5CD,OAAK,EAAC;AAAsC,CAAjD,EAAkC,WAAlC,EAA2C;AAAA;AAA3C;;gEACAC,oBAAqD,KAArD,EAAqD;AAAhDD,OAAK,EAAC;AAA0C,CAArD,EAAiC,gBAAjC,EAA+C;AAAA;AAA/C;;;AACKA,OAAK,EAAC;;;6DAVfC,oBAKM,KALN,cAKM,CAJJA,oBAEM,KAFN,cAEM,aADJA,oBAAoE,MAApE,cAAkC,MAAKC,iBAAEC,oBAAaC,KAAf,CAAvC,EAA2D;AAAA;AAA3D,GACI,CAFN,CAII,EADJH,oBAAyE,KAAzE,EAAyE;AAApED,SAAK,EAAC,YAA8D;AAAhDK,WAAK,kCAAQF,yBAAiB,IAAjB,CAAR;AAA2C,GAAzE,EAA+D,MAA/D,CACI,CALN,GAMyBA,oCAAzBG,oBASM,KATN,EASM;UAAA;AATDN,SAAK,EAAC,MASL;AATiCK,WAAK,kCAAQF,yBAAiB,KAAjB,CAAR;AAStC,GATN,GACEF,oBAOM,KAPN,cAOM,CANJM,UAMI,EALJC,UAKI,EAJJP,oBAGM,KAHN,cAGM,CAFJA,oBAA+G,KAA/G,EAA+G;AAA1GD,SAAK,EAAC,6CAAoG;AAArDK,WAAK;AAAUF,gCAAkB,IAAlB;AAAkB,KAA5B;AAAgD,GAA/G,EAAqG,MAArG,CAEI,EADJF,oBAAiH,KAAjH,EAAiH;AAA5GD,SAAK,EAAC,8CAAsG;AAAtDK,WAAK;AAAUF,gCAAkB,KAAlB;AAAkB,KAA5B;AAAiD,GAAjH,EAAuG,MAAvG,CACI,CAHN,CAII,CAPN,EADF","names":["class","_createElementVNode","_toDisplayString","$setup","price","onClick","_createElementBlock","_hoisted_6","_hoisted_7"],"sourceRoot":"","sources":["/Users/mac/Desktop/jingdong/src/views/orderConfirmation/Order.vue"],"sourcesContent":["<template>\n  <div class=\"order\">\n    <div class=\"order__price\">实付金额\n      <span class=\"order__price__money\">&yen;{{calculations.price}}</span>\n    </div>\n    <div class=\"order__btn\" @click='() => handleShowConfirm(true)'>提交订单</div>\n  </div>\n  <div class=\"mask\"  v-if='showConfirm' @click='() => handleShowConfirm(false)'>\n    <div class=\"mask__content\">\n      <div class=\"mask__content__title\">确认要离开收银台?</div>\n      <div class=\"mask__content__desc\">请尽快完成支付，否则将被取消</div>\n      <div class=\"mask__content__btns\">\n        <div class=\"mask__content__btn mask__content__btn--left\" @click=\"() => { handleConfirmOrder(true) }\">取消订单</div>\n        <div class=\"mask__content__btn mask__content__btn--right\" @click=\"() => { handleConfirmOrder(false) }\">确认支付</div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { useStore } from 'vuex'\nimport { useCommonCartEffect } from '../../effects/cartEffects.js'\nimport { post } from '../../utils/request.js'\n\nconst useMakeOrder = (productList, shop) => {\n  const router = useRouter()\n  const store = useStore()\n  const handleConfirmOrder = async (iscanceled) => {\n    const products = []\n    for (let i in productList.value) {\n      const product = productList.value[i]\n      products.push({ id: parseInt(product._id, 10), num: product.count })\n      // console.log(products)\n    }\n    try {\n      const result = await post('/api/order', {\n        addressId: 1,\n        shopId,\n        shopName: shopName.value,\n        iscanceled,\n        products\n      })\n      if (result?.errno === 0) {\n        router.push({ name: 'Home' })\n        store.commit('clearCart', shopId)\n      }\n    } catch (e) {\n      alert('请求失败')\n    }\n  }\n}\n\nexport default {\n  name: 'Order',\n  setup () {\n    const route = useRoute()\n    const shopId = parseInt(route.params.id)\n    const { calculations, productList, shopName } = useCommonCartEffect(shopId)\n    const showConfirm = ref(false)\n    const handleShowConfirm = (status) => {\n      showConfirm.value = status\n    }\n    return { calculations, handleConfirmOrder, showConfirm, handleShowConfirm }\n  }\n}\n</script>\n\n<style lang='scss' scoped>\n@import '../../style/viriables.scss';\n\n  // 底部\n  .order {\n    position: fixed;\n    display: flex;\n    width: 100%;\n    align-items: center;\n    justify-content: space-between;\n    padding-left: .18rem;\n    box-sizing: border-box;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    height: .49rem;\n    line-height: .49rem;\n    background-color: $bgColor;\n    &__price {\n      font-size: 14px;\n      color: $content-fontcolor;\n      font-size: .14rem;\n      line-height: .20rem;\n      &__money {\n        font-size: .16rem;\n        line-height: .22rem;\n        font-weight: bold;\n      }\n    }\n    &__btn {\n      width: .98rem;\n      background-color: #4FB0F9;\n      text-align: center;\n      font-size: .14rem;\n      color: $bgColor;\n    }\n  }\n\n  .mask {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.50);\n    &__content {\n      position: absolute;\n      transform: translate(-50%, -50%);\n      top: 50%;\n      left: 50%;\n      width: 3rem;\n      height: 1.57rem;\n      background-color: #fff;\n      text-align: center;\n      border-radius: .04rem;\n      &__title {\n        margin: .24rem 0 0 0;\n        font-size: .18rem;\n        color: #333;\n      }\n      &__desc {\n        margin: .08rem 0 0 0;\n        font-size: .14rem;\n        color: #666;\n      }\n      &__btns {\n        display: flex;\n        margin: .24rem .58rem;\n      }\n      &__btn {\n        flex: 1;\n        width: .8rem;\n        line-height: .32rem;\n        border-radius: .16rem;\n        font-size: .14rem;\n        &--left {\n          margin-right: .12rem;\n          border: .01rem solid #4FB0F9;\n          color: #0091FF;\n        }\n        &--right {\n          margin-left: .12rem;\n          background: #4FB0F9;\n          color: #fff;\n          border: .01rem solid #fff;\n        }\n      }\n    }\n  }\n</style>\n"]},"metadata":{},"sourceType":"module"}