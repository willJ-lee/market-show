{"ast":null,"code":"import { reactive, toRefs, ref, watchEffect } from 'vue';\nimport { useRoute } from 'vue-route';\nimport { get } from '../../utils/request.js'; // tab标签常量\n\nconst categories = [{\n  name: '全部商品',\n  tab: 'all'\n}, {\n  name: '秒杀',\n  tab: 'seckill'\n}, {\n  name: '新鲜水果',\n  tab: 'fruit'\n}]; // 根据 tab 切换逻辑\n\nconst useTabEffect = () => {\n  const currentTab = ref(categories[0].tab);\n\n  const handleTabClick = tab => {\n    currentTab.value = tab;\n  };\n\n  return {\n    currentTab,\n    handleTabClick\n  };\n}; // 列表内容相关逻辑\n\n\nconst useCurrentListEffect = () => {};\n\nexport default {\n  name: 'Content',\n\n  setup() {\n    const data = reactive({\n      contentList: []\n    });\n\n    const getContentData = async tab => {\n      const result = await get('/api/shop/1/products', {\n        tab\n      });\n\n      if (result?.errno === 0 && result?.data?.length) {\n        data.contentList = result.data;\n      }\n    };\n\n    const {\n      currentTab,\n      handleTabClick\n    } = useTabEffect();\n    const {\n      contentList\n    } = toRefs(data);\n    getContentData();\n    return {\n      categories,\n      currentTab,\n      contentList,\n      handleTabClick\n    };\n  }\n\n};","map":{"version":3,"mappings":"AAmCA,SAASA,QAAT,EAAmBC,MAAnB,EAA2BC,GAA3B,EAAgCC,WAAhC,QAAmD,KAAnD;AACA,SAASC,QAAT,QAAyB,WAAzB;AACA,SAASC,GAAT,QAAoB,wBAApB,C,CAEA;;AACA,MAAMC,UAAS,GAAI,CACjB;AAAEC,MAAI,EAAE,MAAR;AAAgBC,KAAG,EAAE;AAArB,CADiB,EAEjB;AAAED,MAAI,EAAE,IAAR;AAAcC,KAAG,EAAE;AAAnB,CAFiB,EAGjB;AAAED,MAAI,EAAE,MAAR;AAAgBC,KAAG,EAAE;AAArB,CAHiB,CAAnB,C,CAKA;;AACA,MAAMC,YAAW,GAAI,MAAM;AACzB,QAAMC,UAAS,GAAIR,GAAG,CAACI,UAAU,CAAC,CAAD,CAAV,CAAcE,GAAf,CAAtB;;AACA,QAAMG,cAAa,GAAKH,GAAD,IAAS;AAC9BE,cAAU,CAACE,KAAX,GAAmBJ,GAAnB;AACF,GAFA;;AAGA,SAAO;AAAEE,cAAF;AAAcC;AAAd,GAAP;AACF,CANA,C,CAOA;;;AACA,MAAME,oBAAmB,GAAI,MAAM,CAAC,CAApC;;AAEA,eAAe;AACbN,MAAI,EAAE,SADO;;AAEbO,OAAI,GAAK;AACP,UAAMC,IAAG,GAAIf,QAAQ,CAAC;AAAEgB,iBAAW,EAAE;AAAf,KAAD,CAArB;;AAEA,UAAMC,cAAa,GAAI,MAAOT,GAAP,IAAe;AACpC,YAAMU,MAAK,GAAI,MAAMb,GAAG,CAAC,sBAAD,EAAyB;AAAEG;AAAF,OAAzB,CAAxB;;AACA,UAAIU,MAAM,EAAEC,KAAR,KAAkB,CAAlB,IAAuBD,MAAM,EAAEH,IAAR,EAAcK,MAAzC,EAAiD;AAC/CL,YAAI,CAACC,WAAL,GAAmBE,MAAM,CAACH,IAA1B;AACF;AACF,KALA;;AAMA,UAAM;AAAEL,gBAAF;AAAcC;AAAd,QAAiCF,YAAY,EAAnD;AACA,UAAM;AAAEO;AAAF,QAAkBf,MAAM,CAACc,IAAD,CAA9B;AACAE,kBAAc;AACd,WAAO;AAAEX,gBAAF;AAAcI,gBAAd;AAA0BM,iBAA1B;AAAuCL;AAAvC,KAAP;AACF;;AAfa,CAAf","names":["reactive","toRefs","ref","watchEffect","useRoute","get","categories","name","tab","useTabEffect","currentTab","handleTabClick","value","useCurrentListEffect","setup","data","contentList","getContentData","result","errno","length"],"sourceRoot":"","sources":["/Users/mac/Desktop/jingdong/src/views/shop/Content.vue"],"sourcesContent":["<template>\n  <div class=\"content\">\n    <div class=\"category\">\n      <ul class=\"category_content\">\n        <li\n          :class=\"{'category__item': true, 'category__item--active': currentTab === item.tab}\"\n          v-for=\"item in categories\" :key='item.name'\n          @click=\"() => handleTabClick(item.tab)\"\n          >\n          {{item.name}}\n        </li>\n      </ul>\n    </div>\n    <div class=\"product\">\n      <div class=\"product__item\" v-for=\"item in contentList\" :key=\"item._id\">\n        <img class=\"product__item__img\" src=\"http://www.dell-lee.com/imgs/vue3/near.png\">\n        <div class=\"product__item__detail\">\n          <h4 class=\"product__item__title\">{{item.name}}</h4>\n          <p class=\"product__item__sales\">月售{{item.sales}}件</p>\n          <p class=\"product__item__price\">\n            <span class=\"product__item__yen\">&yen;</span>{{item.price}}\n            <span class=\"product__item__origin\">&yen;{{item.oldPrice}}</span>\n          </p>\n        </div>\n        <div class=\"product__number\">\n          <span class=\"product__number__minus\">-</span>\n          0\n          <span class=\"product__number__plus\">+</span>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { reactive, toRefs, ref, watchEffect } from 'vue'\nimport { useRoute } from 'vue-route'\nimport { get } from '../../utils/request.js'\n\n// tab标签常量\nconst categories = [\n  { name: '全部商品', tab: 'all' },\n  { name: '秒杀', tab: 'seckill' },\n  { name: '新鲜水果', tab: 'fruit' }\n]\n// 根据 tab 切换逻辑\nconst useTabEffect = () => {\n  const currentTab = ref(categories[0].tab)\n  const handleTabClick = (tab) => {\n    currentTab.value = tab\n  }\n  return { currentTab, handleTabClick }\n}\n// 列表内容相关逻辑\nconst useCurrentListEffect = () => {}\n\nexport default {\n  name: 'Content',\n  setup () {\n    const data = reactive({ contentList: [] })\n    \n    const getContentData = async (tab) => {\n      const result = await get('/api/shop/1/products', { tab })\n      if (result?.errno === 0 && result?.data?.length) {\n        data.contentList = result.data\n      }\n    }\n    const { currentTab, handleTabClick } = useTabEffect()\n    const { contentList } = toRefs(data)\n    getContentData()\n    return { categories, currentTab, contentList, handleTabClick }\n  }\n}\n</script>\n\n<style lang='scss' scoped>\n@import '../../style/viriables.scss';\n@import '../../style/mixins.scss';\n\n.content {\n  display: flex;\n  position: absolute;\n  top: 1.52rem;\n  right: 0;\n  bottom: .5rem;\n  left: 0;\n}\n.category {\n  overflow-y: scroll;\n  width: .76rem;\n  height: 100%;\n  background: $search-bgcolor;\n  &__content {\n    height: 100%;\n  }\n  &__item {\n    text-align: center;\n    line-height: .4rem;\n    font-size: .14rem;\n    color: $content-fontcolor;\n    &--active {\n      border-radius: .02rem;\n      background: $bgColor;\n    }\n  }\n}\n.product {\n  // overflow-y: scroll;\n  overflow-y: scroll;\n  flex: 1;\n  padding: 0 .18rem 0 .16rem;\n  &__item {\n    position: relative;\n    display: flex;\n    border-bottom: .01rem solid $content-bgColor;\n      padding: .12rem 0;\n    &__img {\n      margin: 0 .16rem 0 0;\n      width: .68rem;\n      height: .68rem;\n    }\n    &__detail {\n      overflow: hidden;\n    }\n    &__title {\n      font-weight: normal;\n      line-height: .2rem;\n      font-size: .14rem;\n      color: $content-fontcolor;\n      @include ellipsis;\n    }\n    &__sales {\n      margin: .06rem 0;\n      line-height: .16rem;\n      font-size: .12rem;\n      color: $content-fontcolor;\n    }\n    &__price {\n      line-height: .2rem;\n      font-size: .14rem;\n      color: $highlight-color;\n    }\n    &__yen {\n      font-size: .12rem;\n    }\n    &__origin {\n      margin-left: .06rem;\n      font-size: .12rem;\n      color: $light-fontColor;\n      text-decoration: line-through;\n    }\n    .product__number {\n      position: absolute;\n      right: 0;\n      bottom: .1rem;\n      color: $content-fontcolor;\n      &__minus, &__plus {\n        display: inline-block;\n        width: .2rem;\n        height: .2rem;\n        line-height: .16rem;\n        border-radius: 50%;\n        font-size: .2rem;\n        text-align: center;\n      }\n      &__minus {\n        margin-right: .1rem;\n        border: .01rem solid $medium-fontColor;\n        color: $medium-fontColor;\n      }\n      &__plus {\n        margin-left: .1rem;\n        background: $btn-color;\n        color: $bgColor;\n      }\n    }\n  }\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}