{"ast":null,"code":"import { toRefs, reactive } from 'vue';\nimport Doker from '../../components/Docker.vue';\nimport { get } from '../../utils/request.js';\n\nconst useOrderListEffect = () => {\n  const data = reactive({\n    list: []\n  });\n\n  const getOrderList = async () => {\n    const result = await get('/api/order');\n\n    if (result?.errno === 0 && result?.data?.length) {\n      const orderList = result.data;\n      orderList.foreach(order => {\n        const products = order.products || [];\n        let totalPrice = 0;\n        products.foreach(productItem => {\n          totalPrice += productItem?.orderSales * productItem?.price || 0;\n        });\n        order.totalPrice = totalPrice;\n      });\n      data.list = result.data;\n    }\n  };\n\n  getOrderList();\n  const {\n    list\n  } = toRefs(data);\n  return {\n    list\n  };\n};\n\nexport default {\n  name: 'OrderList',\n  components: {\n    Doker\n  },\n\n  setup() {\n    const {\n      list\n    } = useOrderListEffect();\n    console.log(list);\n    return {\n      list\n    };\n  }\n\n};","map":{"version":3,"mappings":"AAyBA,SAASA,MAAT,EAAiBC,QAAjB,QAAiC,KAAjC;AACA,OAAOC,KAAP,MAAkB,6BAAlB;AACA,SAASC,GAAT,QAAoB,wBAApB;;AAEA,MAAMC,kBAAiB,GAAI,MAAM;AAC/B,QAAMC,IAAG,GAAIJ,QAAQ,CAAC;AAAEK,QAAI,EAAE;AAAR,GAAD,CAArB;;AACA,QAAMC,YAAW,GAAI,YAAY;AAC/B,UAAMC,MAAK,GAAI,MAAML,GAAG,CAAC,YAAD,CAAxB;;AACA,QAAIK,MAAM,EAAEC,KAAR,KAAkB,CAAlB,IAAuBD,MAAM,EAAEH,IAAR,EAAcK,MAAzC,EAAiD;AAC/C,YAAMC,SAAQ,GAAIH,MAAM,CAACH,IAAzB;AACAM,eAAS,CAACC,OAAV,CAAmBC,KAAD,IAAW;AAC3B,cAAMC,QAAO,GAAID,KAAK,CAACC,QAAN,IAAkB,EAAnC;AACA,YAAIC,UAAS,GAAI,CAAjB;AACAD,gBAAQ,CAACF,OAAT,CAAkBI,WAAD,IAAiB;AAChCD,oBAAS,IAAOC,WAAW,EAAEC,UAAb,GAA0BD,WAAW,EAAEE,KAAxC,IAAkD,CAAjE;AACD,SAFD;AAGAL,aAAK,CAACE,UAAN,GAAmBA,UAAnB;AACD,OAPD;AAQAV,UAAI,CAACC,IAAL,GAAYE,MAAM,CAACH,IAAnB;AACF;AACF,GAdA;;AAeAE,cAAY;AACZ,QAAM;AAAED;AAAF,MAAWN,MAAM,CAACK,IAAD,CAAvB;AACA,SAAO;AAAEC;AAAF,GAAP;AACF,CApBA;;AAsBA,eAAe;AACba,MAAI,EAAE,WADO;AAEbC,YAAU,EAAE;AACVlB;AADU,GAFC;;AAKbmB,OAAI,GAAK;AACP,UAAM;AAAEf;AAAF,QAAWF,kBAAkB,EAAnC;AACAkB,WAAO,CAACC,GAAR,CAAYjB,IAAZ;AACA,WAAO;AAAEA;AAAF,KAAP;AACF;;AATa,CAAf","names":["toRefs","reactive","Doker","get","useOrderListEffect","data","list","getOrderList","result","errno","length","orderList","foreach","order","products","totalPrice","productItem","orderSales","price","name","components","setup","console","log"],"sourceRoot":"","sources":["/Users/mac/Desktop/jingdong/src/views/orderList/OrderList.vue"],"sourcesContent":["<template>\n  <div class=\"wrapper\">\n    <div class=\"title\">我的订单</div>\n    <div class=\"orders\">\n      <div class=\"order\" v-for='(item, index) in list' :key=\"index\">\n        <div class=\"order__title\">\n          {{item.shopName}}\n          <span class=\"order__status\">{{!item.isCanceled ? '已取消' : '已下单'}}</span>\n        </div>\n        <div class=\"order__content\">\n          <div class=\"order__content__imgs\">\n            <img class=\"order__content__img\" v-for=\"(imgItem, imgIndex) in item \" :key=\"imgIndex\" :src='imgItem.img'>\n          </div>\n          <div class=\"order__info\">\n            <div class=\"order__info__price\">&yen;{{item.totalPrice}}</div>\n            <div class=\"order__info__count\">共3件</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <Doker :currentIndex='2' />\n</template>\n\n<script>\nimport { toRefs, reactive } from 'vue'\nimport Doker from '../../components/Docker.vue'\nimport { get } from '../../utils/request.js'\n\nconst useOrderListEffect = () => {\n  const data = reactive({ list: [] })\n  const getOrderList = async () => {\n    const result = await get('/api/order')\n    if (result?.errno === 0 && result?.data?.length) {\n      const orderList = result.data\n      orderList.foreach((order) => {\n        const products = order.products || []\n        let totalPrice = 0\n        products.foreach((productItem) => {\n          totalPrice += ((productItem?.orderSales * productItem?.price) || 0)\n        })\n        order.totalPrice = totalPrice\n      })\n      data.list = result.data\n    }\n  }\n  getOrderList()\n  const { list } = toRefs(data)\n  return { list }\n}\n\nexport default {\n  name: 'OrderList',\n  components: {\n    Doker\n  },\n  setup () {\n    const { list } = useOrderListEffect()\n    console.log(list)\n    return { list }\n  }\n}\n</script>\n\n<style lang='scss' scoped>\n@import '../../style/viriables.scss';\n\n  .wrapper {\n    overflow-y: auto;\n    position: absolute;\n    padding: 0 .18rem .2rem .18rem;\n    top: 0;\n    right: 0;\n    bottom: .5rem;\n    left: 0;\n    background-color: #eee;\n  }\n  .title {\n    margin: 0 -.18rem .16rem;\n    line-height: .44rem;\n    background-color: $bgColor;\n    text-align: center;\n    font-size: .16rem;\n    color: #333;\n  }\n  .orders {\n  }\n  .order {\n    padding: .16rem;\n    margin-bottom: .16rem;\n    background-color: $bgColor;\n    &__title {\n      margin-bottom: .16rem;\n      line-height: .22rem;\n      font-size: .16rem;\n      color: $content-fontcolor;\n    }\n    &__status {\n      float: right;\n      font-size: .14rem;\n      color: $light-fontColor;\n    }\n    &__content {\n      display: flex;\n      &__imgs {\n        flex: 1;\n      }\n      &__img {\n        margin-right: .12rem;\n        width: .4rem;\n        height: .4rem;\n      }\n    }\n    &__info {\n      width: .7rem;\n      &__price {\n        margin-bottom: .04rem;\n        line-height: .2rem;\n        font-size: .14rem;\n        color: $highlight-color;\n        text-align: right;\n      }\n      &__count {\n        font-size: .12rem;\n        text-align: right;\n        color: $content-fontcolor;\n      }\n    }\n  }\n</style>\n"]},"metadata":{},"sourceType":"module"}