{"ast":null,"code":"import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-5fe3c94c\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"content\"\n};\nconst _hoisted_2 = {\n  class: \"category\"\n};\nconst _hoisted_3 = {\n  class: \"category_content\"\n};\nconst _hoisted_4 = [\"onClick\"];\nconst _hoisted_5 = {\n  class: \"product\"\n};\nconst _hoisted_6 = [\"src\"];\nconst _hoisted_7 = {\n  class: \"product__item__detail\"\n};\nconst _hoisted_8 = {\n  class: \"product__item__title\"\n};\nconst _hoisted_9 = {\n  class: \"product__item__sales\"\n};\nconst _hoisted_10 = {\n  class: \"product__item__price\"\n};\n\nconst _hoisted_11 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"product__item__yen\"\n}, \"¥\", -1\n/* HOISTED */\n));\n\nconst _hoisted_12 = {\n  class: \"product__item__origin\"\n};\nconst _hoisted_13 = {\n  class: \"product__number\"\n};\nconst _hoisted_14 = [\"onClick\"];\nconst _hoisted_15 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"ul\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.categories, item => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      class: _normalizeClass({\n        'category__item': true,\n        'category__item--active': $setup.currentTab === item.tab\n      }),\n      key: item.name,\n      onClick: () => $setup.handleTabClick(item.tab)\n    }, _toDisplayString(item.name), 11\n    /* TEXT, CLASS, PROPS */\n    , _hoisted_4);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))])]), _createElementVNode(\"div\", _hoisted_5, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.list, item => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"product__item\",\n      key: item._id\n    }, [_createElementVNode(\"img\", {\n      class: \"product__item__img\",\n      src: item.imgUrl\n    }, null, 8\n    /* PROPS */\n    , _hoisted_6), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"h4\", _hoisted_8, _toDisplayString(item.name), 1\n    /* TEXT */\n    ), _createElementVNode(\"p\", _hoisted_9, \"月售\" + _toDisplayString(item.sales) + \"件\", 1\n    /* TEXT */\n    ), _createElementVNode(\"p\", _hoisted_10, [_hoisted_11, _createTextVNode(_toDisplayString(item.price) + \" \", 1\n    /* TEXT */\n    ), _createElementVNode(\"span\", _hoisted_12, \"¥\" + _toDisplayString(item.oldPrice), 1\n    /* TEXT */\n    )])]), _createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"span\", {\n      class: \"product__number__minus\",\n      onClick: () => {\n        $setup.changeCartItemInfo($setup.shopId, item._id, item, -1);\n      }\n    }, \"-\", 8\n    /* PROPS */\n    , _hoisted_14), _createTextVNode(\" \" + _toDisplayString($setup.cartList?.[$setup.shopId]?.[item._id]?.count || 0) + \" \", 1\n    /* TEXT */\n    ), _createElementVNode(\"span\", {\n      class: \"product__number__plus\",\n      onClick: () => {\n        $setup.changeCartItemInfo($setup.shopId, item._id, item, 1);\n      }\n    }, \"+\", 8\n    /* PROPS */\n    , _hoisted_15)])]);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))])]);\n}","map":{"version":3,"mappings":";;;;;AACOA,OAAK,EAAC;;;AACJA,OAAK,EAAC;;;AACLA,OAAK,EAAC;;;;AAUPA,OAAK,EAAC;;;;AAGFA,OAAK,EAAC;;;AACLA,OAAK,EAAC;;;AACPA,OAAK,EAAC;;;AACNA,OAAK,EAAC;;;iEACPC,oBAA6C,MAA7C,EAA6C;AAAvCD,OAAK,EAAC;AAAiC,CAA7C,EAAiC,GAAjC,EAAsC;AAAA;AAAtC;;;AACMA,OAAK,EAAC;;;AAGXA,OAAK,EAAC;;;;;uBAvBjBE,oBA8BM,KA9BN,cA8BM,CA7BJD,oBAUM,KAVN,cAUM,CATJA,oBAQK,IARL,cAQK,oBAPHC,oBAMKC,SANL,EAMK,IANL,EAMKC,YAJYC,iBAIZ,EAJIC,IAAkB,IAAd;yBAFbJ,oBAMK,IANL,EAMK;AALFF,WAAK;AAAA;AAAA,kCAAqDK,sBAAeC,IAAI,CAACC;AAAzE,QAKH;AAJyBC,SAAG,EAAEF,IAAI,CAACG,IAInC;AAHFC,aAAK,QAAQL,sBAAeC,IAAI,CAACC,GAApB;AAGX,KANL,mBAKID,IAAI,CAACG,KALT,EAKa;AAAA;AALb,MAKaE,UALb;GAMK,CANL;;AAAA,GAOG,EARL,CASI,CAVN,CA6BI,EAlBJV,oBAiBM,KAjBN,cAiBM,oBAhBJC,oBAeMC,SAfN,EAeM,IAfN,EAeMC,YAfoCC,WAepC,EAf4BC,IAAY,IAAR;yBAAtCJ,oBAeM,KAfN,EAeM;AAfDF,WAAK,EAAC,eAeL;AAf2CQ,SAAG,EAAEF,IAAI,CAACM;AAerD,KAfN,GACEX,oBAAmD,KAAnD,EAAmD;AAA9CD,WAAK,EAAC,oBAAwC;AAAlBa,SAAG,EAAEP,IAAI,CAACQ;AAAQ,KAAnD;;AAAA,mBACAb,oBAOM,KAPN,cAOM,CANJA,oBAAmD,IAAnD,cAAmDc,iBAAhBT,IAAI,CAACG,IAAW,CAAnD,EAA4C;AAAA;AAA5C,KAMI,EALJR,oBAAqD,GAArD,cAAgC,OAAEc,iBAAET,IAAI,CAACU,KAAP,CAAF,GAAgB,GAAhD,EAAiD;AAAA;AAAjD,KAKI,EAJJf,oBAGI,GAHJ,eAGI,CAFFgB,WAEE,oCAF6CX,IAAI,CAACY,SAAO,KAC3D;AAAA;KACE,EADFjB,oBAAiE,MAAjE,eAAoC,MAAKc,iBAAET,IAAI,CAACa,QAAP,CAAzC,EAAwD;AAAA;AAAxD,KACE,CAHJ,CAII,CAPN,GAQAlB,oBAIM,KAJN,eAIM,CAHJA,oBAA+G,MAA/G,EAA+G;AAAzGD,WAAK,EAAC,wBAAmG;AAAzEU,aAAK;AAAUL,kCAAmBA,aAAnB,EAA2BC,IAAI,CAACM,GAAhC,EAAqCN,IAArC,EAAyC,EAAzC;AAAyC;AAAiB,KAA/G,EAAuG,GAAvG,EAAwG;AAAA;AAAxG,MAAwGc,WAAxG,CAGI,mBAH2G,MAC/GL,iBAAEV,kBAAWA,aAAX,IAAqBC,IAAI,CAACM,GAA1B,GAAgCS,KAAhC,IAAqC,CAAvC,CAD+G,GAChE,KAC/C;AAAA;KACI,EADJpB,oBAA6G,MAA7G,EAA6G;AAAvGD,WAAK,EAAC,uBAAiG;AAAxEU,aAAK;AAAUL,kCAAmBA,aAAnB,EAA2BC,IAAI,CAACM,GAAhC,EAAqCN,IAArC,EAAyC,CAAzC;AAAyC;AAAgB,KAA7G,EAAqG,GAArG,EAAsG;AAAA;AAAtG,MAAsGgB,WAAtG,CACI,CAJN,EAVF;GAeM,CAfN;;AAAA,GAgBI,EAjBN,CAkBI,CA9BN","names":["class","_createElementVNode","_createElementBlock","_Fragment","_renderList","$setup","item","tab","key","name","onClick","_hoisted_4","_id","src","imgUrl","_toDisplayString","sales","_hoisted_11","price","oldPrice","_hoisted_14","count","_hoisted_15"],"sourceRoot":"","sources":["/Users/mac/Desktop/jingdong/src/views/shop/Content.vue"],"sourcesContent":["<template>\n  <div class=\"content\">\n    <div class=\"category\">\n      <ul class=\"category_content\">\n        <li\n          :class=\"{'category__item': true, 'category__item--active': currentTab === item.tab}\"\n          v-for=\"item in categories\" :key='item.name'\n          @click=\"() => handleTabClick(item.tab)\"\n          >\n          {{item.name}}\n        </li>\n      </ul>\n    </div>\n    <div class=\"product\">\n      <div class=\"product__item\" v-for=\"item in list\" :key=\"item._id\">\n        <img class=\"product__item__img\" :src=\"item.imgUrl\">\n        <div class=\"product__item__detail\">\n          <h4 class=\"product__item__title\">{{item.name}}</h4>\n          <p class=\"product__item__sales\">月售{{item.sales}}件</p>\n          <p class=\"product__item__price\">\n            <span class=\"product__item__yen\">&yen;</span>{{item.price}}\n            <span class=\"product__item__origin\">&yen;{{item.oldPrice}}</span>\n          </p>\n        </div>\n        <div class=\"product__number\">\n          <span class=\"product__number__minus\" @click=\"() => { changeCartItemInfo(shopId, item._id, item, -1) }\">-</span>\n          {{cartList?.[shopId]?.[item._id]?.count || 0 }}\n          <span class=\"product__number__plus\" @click=\"() => { changeCartItemInfo(shopId, item._id, item, 1) }\">+</span>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { reactive, toRefs, ref, watchEffect } from 'vue'\nimport { useRoute } from 'vue-router'\nimport { useStore } from 'vuex'\nimport { get } from '../../utils/request.js'\nimport { useCommonCartEffect } from './commonCartEffect.js'\n\n// tab标签常量\nconst categories = [\n  { name: '全部商品', tab: 'all' },\n  { name: '秒杀', tab: 'seckill' },\n  { name: '新鲜水果', tab: 'fruit' }\n]\n// 根据 tab 切换逻辑\nconst useTabEffect = () => {\n  const currentTab = ref(categories[0].tab)\n  const handleTabClick = (tab) => {\n    currentTab.value = tab\n  }\n  return { currentTab, handleTabClick }\n}\n// 列表内容相关逻辑\nconst useCurrentListEffect = (currentTab, shopId) => {\n  const content = reactive({ list: [] })\n  const getContentData = async () => {\n    const result = await get(`/api/shop/${shopId}/products`, { tab: currentTab.value })\n    if (result?.errno === 0 && result?.data?.length) {\n      content.list = result.data\n    }\n  }\n  watchEffect(() => {\n    getContentData(currentTab)\n  })\n  const { list } = toRefs(content)\n  return { list, getContentData }\n}\n\nexport default {\n  name: 'Content',\n  setup () {\n    const route = useRoute()\n    const shopId = route.params.id\n    const { currentTab, handleTabClick } = useTabEffect()\n    const { list, getContentData } = useCurrentListEffect(currentTab, shopId)\n    const { cartList, changeCartItemInfo } = useCommonCartEffect()\n    getContentData()\n    return { categories, currentTab, list, handleTabClick, shopId, cartList, changeCartItemInfo }\n  }\n}\n</script>\n\n<style lang='scss' scoped>\n@import '../../style/viriables.scss';\n@import '../../style/mixins.scss';\n\n.content {\n  display: flex;\n  position: absolute;\n  top: 1.52rem;\n  right: 0;\n  bottom: .5rem;\n  left: 0;\n}\n.category {\n  overflow-y: scroll;\n  width: .76rem;\n  height: 100%;\n  background: $search-bgcolor;\n  &__content {\n    height: 100%;\n  }\n  &__item {\n    text-align: center;\n    line-height: .4rem;\n    font-size: .14rem;\n    color: $content-fontcolor;\n    &--active {\n      border-radius: .02rem;\n      background: $bgColor;\n    }\n  }\n}\n.product {\n  // overflow-y: scroll;\n  overflow-y: scroll;\n  flex: 1;\n  padding: 0 .18rem 0 .16rem;\n  &__item {\n    position: relative;\n    display: flex;\n    border-bottom: .01rem solid $content-bgColor;\n      padding: .12rem 0;\n    &__img {\n      margin: 0 .16rem 0 0;\n      width: .68rem;\n      height: .68rem;\n    }\n    &__detail {\n      overflow: hidden;\n    }\n    &__title {\n      font-weight: normal;\n      line-height: .2rem;\n      font-size: .14rem;\n      color: $content-fontcolor;\n      @include ellipsis;\n    }\n    &__sales {\n      margin: .06rem 0;\n      line-height: .16rem;\n      font-size: .12rem;\n      color: $content-fontcolor;\n    }\n    &__price {\n      line-height: .2rem;\n      font-size: .14rem;\n      color: $highlight-color;\n    }\n    &__yen {\n      font-size: .12rem;\n    }\n    &__origin {\n      margin-left: .06rem;\n      font-size: .12rem;\n      color: $light-fontColor;\n      text-decoration: line-through;\n    }\n    .product__number {\n      position: absolute;\n      right: 0;\n      bottom: .1rem;\n      color: $content-fontcolor;\n      &__minus, &__plus {\n        display: inline-block;\n        width: .2rem;\n        height: .2rem;\n        line-height: .16rem;\n        border-radius: 50%;\n        font-size: .2rem;\n        text-align: center;\n      }\n      &__minus {\n        margin-right: .1rem;\n        border: .01rem solid $medium-fontColor;\n        color: $medium-fontColor;\n      }\n      &__plus {\n        margin-left: .1rem;\n        background: $btn-color;\n        color: $bgColor;\n      }\n    }\n  }\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}